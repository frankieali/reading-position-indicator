!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ReadingPositionIndicator=e():n.ReadingPositionIndicator=e()}(this,function(){return function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:r})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=3)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nmodule.exports = __webpack_require__(1).default;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 0\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/index.js?")},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); // apply library styling\n\n\nvar _ReadingPositionIndicator = __webpack_require__(2);\n\nvar _ReadingPositionIndicator2 = _interopRequireDefault(_ReadingPositionIndicator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* --------------------------------------------------------------\n  ReadingPositionIndicator library \n*/\nvar ReadingPositionIndicator = function () {\n  function ReadingPositionIndicator() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      color: null,\n      percentage: {\n        show: false,\n        color: null,\n        opacity: null\n      }\n    };\n\n    _classCallCheck(this, ReadingPositionIndicator);\n\n    props.percentage = props.percentage || {};\n    this.props = props;\n    this.scroll = {\n      maxHeight: 1,\n      last_known_scroll_position: 0,\n      ticking: false\n    };\n  }\n\n  _createClass(ReadingPositionIndicator, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      this._transformName = this._getTransformVendorPrefixAsString();\n\n      this.progressBarContainerEl = document.getElementById('rpi-progress-bar-container');\n      this.progressBarEl = this.progressBarContainerEl.querySelector('.rpi-progress-bar-container__position');\n      this.progressBarPercentageEl = this.progressBarContainerEl.querySelector('.rpi-progress-bar-container__percentage');\n\n      if (this.props.color) {\n        this.progressBarEl.style.backgroundColor = this.props.color;\n      }\n      if (this.props.percentage.show) {\n        if (this.props.percentage.color) this.progressBarPercentageEl.style.color = this.props.percentage.color;\n        if (this.props.percentage.opacity) this.progressBarPercentageEl.style.opacity = this.props.percentage.opacity;\n      }\n\n      this._onResize = this._debounce(function (event) {\n        _this._update();\n      }, 200);\n\n      this._update();\n\n      this._onScroll = this._onScroll.bind(this);\n      this._onResize = this._onResize.bind(this);\n\n      window.addEventListener('scroll', this._onScroll);\n      window.addEventListener('resize', this._onResize);\n\n      return this;\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      window.removeEventListener('scroll', this._onScroll);\n      window.removeEventListener('resize', this._onResize);\n      return this;\n    }\n  }, {\n    key: '_update',\n    value: function _update() {\n      this.scroll.documentHeight = this._getDocumentHeight();\n      this.scroll.viewHeight = this._getViewHeight();\n      this.scroll.maxHeight = this.scroll.documentHeight - this.scroll.viewHeight;\n      this._updateProgressBar(this._getScrollPosition());\n    }\n  }, {\n    key: '_onScroll',\n    value: function _onScroll() {\n      var _this2 = this;\n\n      // https://developer.mozilla.org/en-US/docs/Web/Events/scroll\n      this.scroll.last_known_scroll_position = this._getScrollPosition();\n      if (!this.scroll.ticking) {\n        window.requestAnimationFrame(function (_) {\n          _this2._updateProgressBar(_this2.scroll.last_known_scroll_position);\n          _this2.scroll.ticking = false;\n        });\n      }\n      this.scroll.ticking = true;\n    }\n  }, {\n    key: '_updateProgressBar',\n    value: function _updateProgressBar(scrollPosition) {\n      scrollPosition = scrollPosition || 0;\n      var value = Math.min(scrollPosition, this.scroll.maxHeight);\n      var percentage = Math.round(100 * value / Math.max(this.scroll.maxHeight, 1));\n      this.progressBarContainerEl.setAttribute('aria-valuenow', percentage);\n      this.progressBarEl.style[this._transformName] = 'scaleX(' + percentage / 100 + ')';\n\n      if (this.props.percentage.show) {\n        if (this.scroll.viewHeight >= this.scroll.documentHeight) this.progressBarPercentageEl.innerHTML = '';else this.progressBarPercentageEl.innerHTML = percentage + '%';\n      }\n    }\n  }, {\n    key: '_getTransformVendorPrefixAsString',\n    value: function _getTransformVendorPrefixAsString() {\n      // http://shouldiprefix.com/#transforms\n      var el = document.createElement('div');\n      var names = {\n        transform: 'transform', // Modern\n        WebkitTransition: 'webkitTransform', // iOS7+\n        MsTransform: 'msTransform' };\n      for (var name in names) {\n        if (el.style[name] !== undefined) {\n          return names[name];\n        }\n      }\n      return 'transform';\n    }\n\n    // Cross-browser http://stackoverflow.com/a/11077758/815507\n\n  }, {\n    key: '_getDocumentHeight',\n    value: function _getDocumentHeight() {\n      return Math.max(document.documentElement.clientHeight, document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight);\n    }\n\n    // Cross-browser\n\n  }, {\n    key: '_getViewHeight',\n    value: function _getViewHeight() {\n      return Math.max(window.innerHeight, 0);\n    }\n\n    // Cross-browser\n\n  }, {\n    key: '_getScrollPosition',\n    value: function _getScrollPosition() {\n      // window.scrollY is buggy, e.g. for Safari not correct height\n      return window.pageYOffset || document.documentElement.scrollTop || 0;\n    }\n\n    // https://john-dugan.com/javascript-debounce/\n\n  }, {\n    key: '_debounce',\n    value: function _debounce(e, t, n) {\n      var a;\n      return function () {\n        var r = this,\n            i = arguments,\n            o = function o() {\n          a = null, n || e.apply(r, i);\n        },\n            s = n && !a;\n        clearTimeout(a), a = setTimeout(o, t || 200), s && e.apply(r, i);\n      };\n    }\n  }]);\n\n  return ReadingPositionIndicator;\n}();\n\nexports.default = ReadingPositionIndicator;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/ReadingPositionIndicator.js\n// module id = 1\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/assets/ReadingPositionIndicator.js?")},function(module,exports){eval("// removed by extract-text-webpack-plugin\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/ReadingPositionIndicator.css\n// module id = 2\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/assets/ReadingPositionIndicator.css?")},function(module,exports,__webpack_require__){eval("module.exports = __webpack_require__(0);\n\n\n//////////////////\n// WEBPACK FOOTER\n// multi ./src/index\n// module id = 3\n// module chunks = 0\n\n//# sourceURL=webpack:///multi_./src/index?")}])});